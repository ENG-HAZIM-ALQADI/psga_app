import 'package:hive/hive.dart';
import '../../features/alerts/data/models/alert_model.dart';

/// โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
/// ๐จ AlertModelAdapter - ุงููุญููู ุงูุฎุงุต ุจุชุฎุฒูู ูุงุณุชุฑุฌุงุน ุงูุชูุจููุงุช
/// โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
/// 
/// ๐ฏ ุงููููุน ูู Clean Architecture:
/// - ุงูุทุจูุฉ: Core Layer > Adapters
/// - ุงููุธููุฉ: ุชุญููู AlertModel (ุชูุจูู/ุฅูุฐุงุฑ) ูู/ุฅูู Binary ููุชุฎุฒูู ูู Hive
/// 
/// ๐ ูุง ูู Alert ูู ุชุทุจูู PSGAุ
/// Alert ูู "ุชูุจูู ุฐูู" ูุทููู ุงูุชุทุจูู ุนูุฏูุง ูุญุฏุซ ุดูุก ููู ุฃุซูุงุก ุงูุฑุญูุฉ:
/// 
/// ๐ ุฃููุงุน ุงูุชูุจููุงุช (AlertType):
/// 1. **deviation** - ุงูุญุฑุงู ุนู ุงููุณุงุฑ ุงููุฎุทุท
///    - ูุซุงู: "ุฎุฑุฌุช ุนู ุงูุทุฑูู ุจูุณุงูุฉ 500 ูุชุฑ!"
/// 
/// 2. **inactivity** - ุนุฏู ุญุฑูุฉ (ุงููุณุชุฎุฏู ุชููู ููุชุฑุฉ ุทูููุฉ)
///    - ูุซุงู: "ูู ุชุชุญุฑู ููุฐ 15 ุฏูููุฉุ ูู ุฃูุช ุจุฎูุฑุ"
/// 
/// 3. **lowBattery** - ุจุทุงุฑูุฉ ููุฎูุถุฉ
///    - ูุซุงู: "ุงูุจุทุงุฑูุฉ 10%ุ ูููุตุญ ุจุดุญู ุงูุฌูุงุฒ"
/// 
/// 4. **sos** - ุงุณุชุบุงุซุฉ ุทุงุฑุฆุฉ (SOS)
///    - ูุซุงู: "ุชู ุฅุฑุณุงู ุฅุดุนุงุฑ ุงุณุชุบุงุซุฉ ูุฌูุงุช ุงูุงุชุตุงู!"
/// 
/// 5. **arrival** - ูุตูู ููุฌูุฉ
///    - ูุซุงู: "ูุตูุช ุจุฃูุงู ููุฌูุชู"
/// 
/// 6. **custom** - ุชูุจูู ูุฎุตุต
///    - ูุซุงู: ุฃู ุชูุจูู ูุถููู ุงููุทูุฑ ูุงุญูุงู
/// 
/// ๐๏ธ ูุณุชููุงุช ุงูุชูุจููุงุช (AlertLevel):
/// - **low** (ุฃุฒุฑู): ูุนูููุฉ ุจุณูุทุฉุ ูุง ุฏุงุนู ููููู
/// - **medium** (ุฃุตูุฑ): ุชุญุฐูุฑุ ุงูุชุจู!
/// - **high** (ุจุฑุชูุงูู): ุฎุทุฑุ ูุฌุจ ุงูุชุตุฑู ููุฑุงู
/// - **critical** (ุฃุญูุฑ): ุญุงูุฉ ุทูุงุฑุฆ! ุงุชุตู ุจุงููุณุงุนุฏุฉ
/// 
/// ๐ ุฏูุฑุฉ ุญูุงุฉ Alert:
/// 1. **pending** - ุชู ุฅูุดุงุก ุงูุชูุจูู ููู ููุฑุณู ุจุนุฏ
/// 2. **sent** - ุชู ุฅุฑุณุงูู (ูููุณุชุฎุฏู ุฃู ุฌูุงุช ุงูุงุชุตุงู)
/// 3. **acknowledged** - ุงููุณุชุฎุฏู ุดุงูุฏู ูุงุณุชุฌุงุจ ูู
/// 4. **escalated** - ุชู ุชุตุนูุฏู (ูุซูุงู: ูู medium ุฅูู high)
/// 5. **cancelled** - ุชู ุฅูุบุงุคู (ูุงู ุฅูุฐุงุฑ ูุงุฐุจ)
/// 
/// ๐ก ูุซุงู ูุงูุนู ูุงูู:
/// ```
/// ุงููุณุชุฎุฏู ูู ุฑุญูุฉ ูู ุงูุจูุช ููุนูู
/// โ ูุฎุฑุฌ ุนู ุงูุทุฑูู ุจูุณุงูุฉ 600 ูุชุฑ
/// โ ุงูุชุทุจูู ููุดุฆ Alert:
///    - type: deviation
///    - level: medium (ุชุญุฐูุฑ)
///    - message: "ุฎุฑุฌุช ุนู ุงููุณุงุฑ ุงููุฎุทุท ุจูุณุงูุฉ 600 ูุชุฑ"
/// โ ูุฑุณูู ูููุณุชุฎุฏู (notification)
/// โ ุงููุณุชุฎุฏู ูุถุบุท "ุดุงูุฏุช" โ status = acknowledged
/// ```
/// 
/// ๐ข typeId = 5:
/// - ุฑูู ูุฑูุฏ ูู AlertModel ูู Hive

class AlertModelAdapter extends TypeAdapter<AlertModel> {
  /// ๐ข typeId: ุฑูู ุงูุชุนุฑูู ุงููุฑูุฏ
  /// - 0 = UserModel
  /// - 1 = RouteModel
  /// - 2 = TripModel
  /// - 3 = WaypointModel
  /// - 4 = LocationModel
  /// - 5 = AlertModel โ (ุงุญูุง ููุง!)
  /// - 6-9 = Models ุฃุฎุฑู
  @override
  final int typeId = 5;

  /// โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
  /// ๐ read() - ูุฑุงุกุฉ AlertModel ูู Hive
  /// โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
  /// 
  /// ๐ฏ ูุชู ุชูุณุชุฏุนูุ
  /// - ุนูุฏ ุนุฑุถ ุณุฌู ุงูุชูุจููุงุช (Alert History)
  /// - ุนูุฏ ุงุณุชุฆูุงู ุฑุญูุฉ ูุชูููุฉ (ูุญุชุงุฌ ูุนุฑู ุงูุชูุจููุงุช ุงูุณุงุจูุฉ)
  /// - ุนูุฏ ุงูุชุญูู ูู ุงูุชูุจููุงุช ุงููุนููุฉ (pending)
  /// 
  /// ๐ ุงูุฎุทูุงุช:
  /// 1. ูุฑุงุกุฉ ุนุฏุฏ ุงูุญููู (14 ุญูู)
  /// 2. ุชุฌููุน ุงูุจูุงูุงุช ูู Map
  /// 3. ุงุณุชุฎุฏุงู AlertModel.fromJson() ููุชุญููู
  /// 
  /// โ๏ธ ููุงุท ูููุฉ:
  /// - Alert ูุญุชูู ุนูู LocationModel (ูููุน ุญุฏูุซ ุงูุชูุจูู)
  /// - ุจุนุถ ุงูุญููู ุงุฎุชูุงุฑูุฉ (acknowledgedAtุ escalatedAt)
  /// - metadata ูุญุชูู ุนูู ูุนูููุงุช ุฅุถุงููุฉ ูุฑูุฉ (Map)
  @override
  AlertModel read(BinaryReader reader) {
    /// 1๏ธโฃ ููุฑุฃ ุนุฏุฏ ุงูุญููู (14 ุญูู)
    final numOfFields = reader.readByte();
    
    /// 2๏ธโฃ ูุฌูุน ุงูุจูุงูุงุช ูู Map
    final fields = <int, dynamic>{
      for (int i = 0; i < numOfFields; i++) reader.readByte(): reader.read(),
    };

    /// 3๏ธโฃ ูููุดุฆ AlertModel ุจุงุณุชุฎุฏุงู fromJson
    /// 
    /// ๐ ุดุฑุญ ูู ุญูู ุจุงูุชูุตูู:
    return AlertModel.fromJson({
      /// Field 0: ูุนุฑูู ุงูุชูุจูู ุงููุฑูุฏ
      /// - ูุซุงู: "alert_20240115_143000"
      /// - ูุชุถูู ุงูุชุงุฑูุฎ ูุงูููุช ุนุงุฏุฉ
      'id': fields[0] as String,
      
      /// Field 1: ูุนุฑูู ุงูุฑุญูุฉ ุงููุฑุชุจุทุฉ
      /// - ุฃู Trip ุญุตู ููู ูุฐุง ุงูุชูุจููุ
      /// - ูุฑุจุท Alert ุจู Trip
      /// - ูุซุงู: "trip_20240115_080000"
      'tripId': fields[1] as String,
      
      /// Field 2: ูุนุฑูู ุงููุณุชุฎุฏู
      /// - ูู ูู ุตุงุญุจ ูุฐุง ุงูุชูุจููุ
      'userId': fields[2] as String,
      
      /// Field 3: ููุน ุงูุชูุจูู (AlertType)
      /// - ูุญููุธ ูู Stringุ ูุญููู ูู Enum
      /// - ุงูููู ุงูููููุฉ: "deviation", "inactivity", "lowBattery", "sos", "arrival", "custom"
      /// 
      /// ๐ก ููุงุฐุง String ูููุณ intุ
      /// ูุฃู Strings ุฃูุถุญ ุนูุฏ ูุฑุงุกุฉ ุงูุจูุงูุงุช ูุฏููุงู (ููู debugging)
      /// ูุซูุงู: "sos" ุฃูุถุญ ูู "3"
      'type': fields[3] as String,
      
      /// Field 4: ูุณุชูู ุงูุฎุทูุฑุฉ (AlertLevel)
      /// - ุงูููู: "low", "medium", "high", "critical"
      /// - ูุญุฏุฏ ููู ููุจุฑุฉ ุงูุชูุจูู ูู ุงููุงุฌูุฉ
      'level': fields[4] as String,
      
      /// Field 5: ุญุงูุฉ ุงูุชูุจูู (AlertStatus)
      /// - ุงูููู: "pending", "sent", "acknowledged", "escalated", "cancelled"
      /// - ุชุชุจุน ุฏูุฑุฉ ุญูุงุฉ ุงูุชูุจูู ูู ุงูุจุฏุงูุฉ ููููุงูุฉ
      'status': fields[5] as String,
      
      /// Field 6: ูููุน ุญุฏูุซ ุงูุชูุจูู
      /// - LocationModel ูุญุฏุฏ ุฃูู ุญุตู ุงูุชูุจูู ุจุงูุถุจุท
      /// - ูููุฏ ุฌุฏุงู ูู ุญุงูุงุช ุงูุทูุงุฑุฆ (SOS)
      /// - ูุญููุธ ูู Mapุ ุณูุชู ุชุญูููู ูู fromJson
      /// 
      /// ๐ก ูุซุงู:
      /// ุนูุฏ ุงูุญุฑุงู ุนู ุงููุณุงุฑุ ูุญูุธ ุงููููุน ุงูุฏููู ููุงูุญุฑุงู
      /// ูู ุงููุณุชุฎุฏู ุงุชุตู ุจุงููุณุงุนุฏุฉุ ููุฏุฑ ูุฑุณููู ุงููููุน ุจุงูุถุจุท
      'location': fields[6],
      
      /// Field 7: ุฑุณุงูุฉ ุงูุชูุจูู
      /// - ุงููุต ุงูุฐู ูุฑุงู ุงููุณุชุฎุฏู
      /// - ุฃูุซูุฉ:
      ///   * "ุฎุฑุฌุช ุนู ุงููุณุงุฑ ุงููุฎุทุท ุจูุณุงูุฉ 600 ูุชุฑ"
      ///   * "ูู ุชุชุญุฑู ููุฐ 15 ุฏูููุฉุ ูู ุฃูุช ุจุฎูุฑุ"
      ///   * "ุชู ุฅุฑุณุงู ุฅุดุนุงุฑ ุงุณุชุบุงุซุฉ SOS ูุฌูุงุช ุงูุงุชุตุงู"
      'message': fields[7] as String,
      
      /// Field 8: ููุช ุฅุทูุงู ุงูุชูุจูู
      /// - ุงููุญุธุฉ ุงูุฏูููุฉ ุงูุชู ุฃุทูู ูููุง ุงูุชุทุจูู ุงูุชูุจูู
      /// - ูุญููุธ ูู String ุจุตูุบุฉ ISO 8601
      'triggeredAt': fields[8] as String,
      
      /// Field 9: ููุช ุงูุงุณุชุฌุงุจุฉ (ุงุฎุชูุงุฑู)
      /// - ูุชู ุดุงูุฏ ุงููุณุชุฎุฏู ุงูุชูุจูู ูุงุณุชุฌุงุจ ููุ
      /// - null ุฅุฐุง ูู ูุณุชุฌุจ ุจุนุฏ
      /// - ูููุฏ ูุญุณุงุจ: ูู ุงุณุชุบุฑู ุงููุณุชุฎุฏู ููุฑุฏุ
      /// 
      /// ๐ก ูุซุงู:
      /// triggeredAt: 14:00:00
      /// acknowledgedAt: 14:00:45
      /// โ ุงุณุชุบุฑู 45 ุซุงููุฉ ููุฑุฏ
      'acknowledgedAt': fields[9] as String?,
      
      /// Field 10: ููุช ุงูุชุตุนูุฏ (ุงุฎุชูุงุฑู)
      /// - ูุชู ุชู ุชุตุนูุฏ ุงูุชูุจููุ
      /// - null ุฅุฐุง ูู ูุชู ุงูุชุตุนูุฏ
      /// 
      /// ๐ก ูุง ูุนูู ุงูุชุตุนูุฏุ
      /// ูู ุงููุณุชุฎุฏู ูู ูุณุชุฌุจ ูุชูุจูู medium ุฎูุงู 5 ุฏูุงุฆูุ
      /// ูุตุนูุฏู ูู high ููุฑุณู ุฅุดุนุงุฑุงุช ุฃููู (ุตูุช ุฃุนููุ ุงูุชุฒุงุฒุ ุฅูุฎ)
      'escalatedAt': fields[10] as String?,
      
      /// Field 11: ุฌูุงุช ุงูุงุชุตุงู ุงูุชู ุฃูุฑุณู ููุง ุงูุชูุจูู
      /// - ูุงุฆูุฉ ุจูุนุฑูุงุช ุฌูุงุช ุงูุงุชุตุงู
      /// - ูุซุงู: ["contact_1", "contact_2", "contact_3"]
      /// - ูุงุฑุบุฉ [] ุฅุฐุง ูู ููุฑุณู ูุฃุญุฏ
      /// 
      /// ๐ก ูุชู ูุฑุณู ูุฌูุงุช ุงูุงุชุตุงูุ
      /// - ุชูุจููุงุช SOS: ุฏุงุฆูุงู ูุฑุณู ูุฌููุน ุฌูุงุช ุงูุงุชุตุงู ุงูุทุงุฑุฆุฉ
      /// - ุชูุจููุงุช High: ูุฑุณู ุฅุฐุง ูุนูู ุงููุณุชุฎุฏู ูุฐุง ุงูุฎูุงุฑ
      /// - ุชูุจููุงุช Medium/Low: ุนุงุฏุฉ ูุง ูุฑุณู
      'sentToContacts': fields[11] ?? [],
      
      /// Field 12: ุทุฑููุฉ ุงูุชูุตูู (DeliveryMethod)
      /// - ููู ุชู ุฅุฑุณุงู ุงูุชูุจููุ
      /// - ุงูููู ุงูููููุฉ:
      ///   * "inApp" - ุฏุงุฎู ุงูุชุทุจูู ููุท (notification ุจุณูุทุฉ)
      ///   * "push" - ุฅุดุนุงุฑ Push (ุญุชู ูู ุงูุชุทุจูู ูุบูู)
      ///   * "sms" - ุฑุณุงูุฉ SMS (ููุญุงูุงุช ุงูุทุงุฑุฆุฉ)
      ///   * "call" - ุงุชุตุงู ูุงุชูู (ููุญุงูุงุช ุงูุญุฑุฌุฉ ุฌุฏุงู)
      ///   * "email" - ุจุฑูุฏ ุฅููุชุฑููู
      'deliveryMethod': fields[12] as String,
      
      /// Field 13: ุจูุงูุงุช ุฅุถุงููุฉ (Metadata)
      /// - Map ูุฑู ูุญุชูู ุนูู ุฃู ูุนูููุงุช ุฅุถุงููุฉ
      /// - ุฃูุซูุฉ:
      ///   * {"deviationDistance": 600, "deviationDirection": "ุดูุงู"}
      ///   * {"batteryLevel": 8, "batteryStatus": "critical"}
      ///   * {"inactivityDuration": 900} (15 ุฏูููุฉ ุจุงูุซูุงูู)
      /// 
      /// ๐ก ูุงุฆุฏุฉ Metadata:
      /// ุชุณูุญ ุจุฅุถุงูุฉ ูุนูููุงุช ุฌุฏูุฏุฉ ุจุฏูู ุชุนุฏูู ุงูู Model ุฃู ุงูู Adapter!
      /// ููุน ูู "ุงููุฑููุฉ ุงููุณุชูุจููุฉ"
      'metadata': fields[13] ?? {},
    });
  }

  /// โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
  /// ๐พ write() - ุญูุธ AlertModel ูู Hive
  /// โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
  /// 
  /// ๐ฏ ูุชู ุชูุณุชุฏุนูุ
  /// - ุนูุฏ ุฅุทูุงู ุชูุจูู ุฌุฏูุฏ (ูู ูุฑุฉ ูุญุฏุซ ุดูุก ููู!)
  /// - ุนูุฏ ุชุญุฏูุซ ุญุงูุฉ ุชูุจูู (ูุซูุงู ูู pending โ sent)
  /// - ุนูุฏ ุงุณุชุฌุงุจุฉ ุงููุณุชุฎุฏู (acknowledged)
  /// - ุนูุฏ ุชุตุนูุฏ ุชูุจูู (escalated)
  /// 
  /// ๐ ุงูุฎุทูุงุช:
  /// 1. ุชุญููู Alert ุฅูู JSON
  /// 2. ูุชุงุจุฉ ุนุฏุฏ ุงูุญููู (14)
  /// 3. ูุชุงุจุฉ ูู ุญูู ุจุงูุชุฑุชูุจ
  /// 
  /// โ๏ธ ููุงุญุธุฉ:
  /// ุจุนุถ ุงูุญููู ุชูุญูุธ ุจุตูุบุฉ ูุฎุชููุฉ:
  /// - Enums โ Strings (type.name)
  /// - DateTime โ Strings (toIso8601String)
  /// - LocationModel โ Map (toJson)
  @override
  void write(BinaryWriter writer, AlertModel obj) {
    /// ุฃููุงู: ูุญูู Alert ุฅูู JSON
    /// ูุญุชุงุฌู ููุญููู ุงููุนูุฏุฉ (locationุ metadata)
    final json = obj.toJson();

    writer
      /// 1๏ธโฃ ููุชุจ ุนุฏุฏ ุงูุญููู (14 ุญูู)
      ..writeByte(14)
      
      /// 2๏ธโฃ Field 0: ุงููุนุฑูู
      ..writeByte(0)
      ..write(obj.id)
      
      /// 3๏ธโฃ Field 1: ูุนุฑูู ุงูุฑุญูุฉ
      ..writeByte(1)
      ..write(obj.tripId)
      
      /// 4๏ธโฃ Field 2: ูุนุฑูู ุงููุณุชุฎุฏู
      ..writeByte(2)
      ..write(obj.userId)
      
      /// 5๏ธโฃ Field 3: ููุน ุงูุชูุจูู
      /// ูุญูู AlertType Enum โ String
      /// ูุซุงู: AlertType.deviation โ "deviation"
      ..writeByte(3)
      ..write(obj.type.name)
      
      /// 6๏ธโฃ Field 4: ูุณุชูู ุงูุฎุทูุฑุฉ
      /// AlertLevel Enum โ String
      /// ูุซุงู: AlertLevel.high โ "high"
      ..writeByte(4)
      ..write(obj.level.name)
      
      /// 7๏ธโฃ Field 5: ุญุงูุฉ ุงูุชูุจูู
      /// AlertStatus Enum โ String
      ..writeByte(5)
      ..write(obj.status.name)
      
      /// 8๏ธโฃ Field 6: ูููุน ุญุฏูุซ ุงูุชูุจูู
      /// LocationModel โ JSON Map
      /// ูุฐุง ููู ุฌุฏุงู ููุชูุจููุงุช ุงูุทุงุฑุฆุฉ!
      ..writeByte(6)
      ..write(json['location'])
      
      /// 9๏ธโฃ Field 7: ุฑุณุงูุฉ ุงูุชูุจูู
      ..writeByte(7)
      ..write(obj.message)
      
      /// ๐ Field 8: ููุช ุงูุฅุทูุงู
      /// DateTime โ ISO 8601 String
      ..writeByte(8)
      ..write(obj.triggeredAt.toIso8601String())
      
      /// 1๏ธโฃ1๏ธโฃ Field 9: ููุช ุงูุงุณุชุฌุงุจุฉ (ุงุฎุชูุงุฑู)
      /// ุฅุฐุง ูุงู nullุ Hive ุชุญูุธู ูู null
      ..writeByte(9)
      ..write(obj.acknowledgedAt?.toIso8601String())
      
      /// 1๏ธโฃ2๏ธโฃ Field 10: ููุช ุงูุชุตุนูุฏ (ุงุฎุชูุงุฑู)
      ..writeByte(10)
      ..write(obj.escalatedAt?.toIso8601String())
      
      /// 1๏ธโฃ3๏ธโฃ Field 11: ุฌูุงุช ุงูุงุชุตุงู ุงูููุฑุณู ููุง
      /// ูุงุฆูุฉ Strings
      ..writeByte(11)
      ..write(obj.sentToContacts)
      
      /// 1๏ธโฃ4๏ธโฃ Field 12: ุทุฑููุฉ ุงูุชูุตูู
      /// DeliveryMethod Enum โ String
      ..writeByte(12)
      ..write(obj.deliveryMethod.name)
      
      /// 1๏ธโฃ5๏ธโฃ Field 13: ุงูุจูุงูุงุช ุงูุฅุถุงููุฉ
      /// Map<String, dynamic>
      /// Hive ุชุชุนุงูู ูุน Maps ูุจุงุดุฑุฉ
      ..writeByte(13)
      ..write(obj.metadata);
  }
}

/// โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
/// ๐ ูุนูููุงุช ุชุนููููุฉ ูููุฉ ูููุจุชุฏุฆูู:
/// โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
/// 
/// ๐ ูุธุงู ุงูุชูุจููุงุช ูู PSGA - ุดุฑุญ ุดุงูู:
/// 
/// 1๏ธโฃ **ููู ูุนูู ูุธุงู ุงูุชูุจููุงุชุ**
///    ```
///    ุฎุทูุฉ 1: ูุญุฏุซ ุดูุก ููู (ุงูุญุฑุงูุ ุจุทุงุฑูุฉ ููุฎูุถุฉุ ุฅูุฎ)
///           โ
///    ุฎุทูุฉ 2: ุงูุชุทุจูู ููุดุฆ Alert ุฌุฏูุฏ
///           โ
///    ุฎุทูุฉ 3: ูุญูุธู ูู Hive (ููุง ุฏูุฑ Adapter!)
///           โ
///    ุฎุทูุฉ 4: ูุฑุณูู ูููุณุชุฎุฏู (notification)
///           โ
///    ุฎุทูุฉ 5: ุงููุณุชุฎุฏู ูุณุชุฌูุจ (ุฃู ูุง ูุณุชุฌูุจ!)
///           โ
///    ุฎุทูุฉ 6: ูุญุฏูุซ ุญุงูุฉ Alert ูู Hive
///    ```
/// 
/// 2๏ธโฃ **ูุตูููุฉ ุงููุฑุงุฑุงุช (Decision Matrix):**
///    
///    | ููุน ุงูุชูุจูู | ุงููุณุชูู | ุงูุฅุฌุฑุงุก ุงูุชููุงุฆู |
///    |-------------|---------|-------------------|
///    | deviation   | low     | ุฅุดุนุงุฑ ุจุณูุท ููุท   |
///    | deviation   | medium  | ุฅุดุนุงุฑ + ุตูุช      |
///    | deviation   | high    | ุฅุดุนุงุฑ + ุฌูุงุช ุงุชุตุงู |
///    | inactivity  | medium  | ุฅุดุนุงุฑ ูุน ุนุฏ ุชูุงุฒูู |
///    | lowBattery  | high    | ุฅุดุนุงุฑ + ุงูุชุฑุงุญ ุดุญู |
///    | sos         | critical| ุงุชุตุงู ููุฑู ุจุงูุฌููุน! |
/// 
/// 3๏ธโฃ **ุงูุชุตุนูุฏ ุงูุชููุงุฆู (Auto-Escalation):**
///    ```dart
///    // ูุซุงู: ุชุตุนูุฏ ุชูุจูู ุฅุฐุง ูู ูุณุชุฌุจ ุงููุณุชุฎุฏู
///    if (alert.triggeredAt.difference(DateTime.now()).inMinutes > 5 
///        && alert.status == AlertStatus.sent
///        && alert.level == AlertLevel.medium) {
///      
///      // ุตุนูุฏ ุงูุชูุจูู!
///      final escalatedAlert = alert.copyWith(
///        level: AlertLevel.high,
///        status: AlertStatus.escalated,
///        escalatedAt: DateTime.now(),
///      );
///      
///      // ุงุญูุธู ูู ุฌุฏูุฏ
///      await alertBox.put(alert.id, escalatedAlert);
///      
///      // ุฃุฑุณู ุฅุดุนุงุฑ ุฃููู
///      sendStrongerNotification(escalatedAlert);
///    }
///    ```
/// 
/// 4๏ธโฃ **ุงุณุชุฎุฏุงู Metadata ุจุฐูุงุก:**
///    ```dart
///    // ูุซุงู 1: ุชูุจูู ุงูุญุฑุงู ูุน ูุนูููุงุช ุฅุถุงููุฉ
///    final deviationAlert = AlertModel(
///      // ... ุงูุญููู ุงูุฃุณุงุณูุฉ
///      metadata: {
///        'deviationDistance': 600,        // ูุชุฑ
///        'deviationDirection': 'ุดูุงู',
///        'plannedRoute': 'route_123',
///        'suggestedAction': 'ุงุฑุฌุน ููุทุฑูู ุงูุฑุฆูุณู'
///      }
///    );
///    
///    // ูุซุงู 2: ุชูุจูู ุจุทุงุฑูุฉ ููุฎูุถุฉ
///    final batteryAlert = AlertModel(
///      // ... ุงูุญููู ุงูุฃุณุงุณูุฉ
///      metadata: {
///        'batteryLevel': 8,               // ูุณุจุฉ ูุฆููุฉ
///        'batteryStatus': 'critical',
///        'nearestChargingStation': 'ูุญุทุฉ ุงูุฑุงุญุฉ - 2 ูู',
///        'estimatedTimeToShutdown': 15    // ุฏูููุฉ
///      }
///    );
///    ```
/// 
/// 5๏ธโฃ **ุฃูุถู ุงูููุงุฑุณุงุช:**
///    
///    โ **ุงูุนู:**
///    - ุงุญูุธ ูู Alert ูู Hive (ูููุฏ ููุณุฌูุงุช ูุงูุชุญูููุงุช)
///    - ุงุณุชุฎุฏู Metadata ูููุนูููุงุช ุงูุฅุถุงููุฉ ุงููุฑูุฉ
///    - ุงุญุฐู ุงูุชูุจููุงุช ุงููุฏููุฉ ุจุนุฏ ูุชุฑุฉ (ูุซูุงู 3 ุฃุดูุฑ)
///    - ุงุฌุนู ุฑุณุงุฆู ุงูุชูุจููุงุช ูุงุถุญุฉ ููุจุงุดุฑุฉ
///    
///    โ **ูุง ุชูุนู:**
///    - ูุง ุชุฑุณู ุชูุจููุงุช ูุซูุฑุฉ ุฌุฏุงู (spam!)
///    - ูุง ุชุณุชุฎุฏู critical ุฅูุง ูู ุญุงูุงุช ุงูุทูุงุฑุฆ ุงููุนููุฉ
///    - ูุง ุชูุณู ุชุญุฏูุซ status ุนูุฏ ุงุณุชุฌุงุจุฉ ุงููุณุชุฎุฏู
///    - ูุง ุชุฎุฒู ุจูุงูุงุช ุญุณุงุณุฉ ูู metadata ุจุฏูู ุชุดููุฑ
/// 
/// 6๏ธโฃ **ูุซุงู ูุงูู - ุณููุงุฑูู SOS:**
///    ```dart
///    // ุงููุณุชุฎุฏู ูุถุบุท ุฒุฑ SOS!
///    
///    // 1. ุฅูุดุงุก Alert
///    final sosAlert = AlertModel(
///      id: 'alert_sos_${DateTime.now().millisecondsSinceEpoch}',
///      tripId: currentTrip.id,
///      userId: currentUser.id,
///      type: AlertType.sos,
///      level: AlertLevel.critical,
///      status: AlertStatus.pending,
///      location: currentLocation,
///      message: '๐จ ุทูุจ ุงุณุชุบุงุซุฉ ุทุงุฑุฆ ูู ${currentUser.name}!',
///      triggeredAt: DateTime.now(),
///      sentToContacts: emergencyContacts.map((c) => c.id).toList(),
///      deliveryMethod: DeliveryMethod.call,
///      metadata: {
///        'tripName': currentTrip.routeName,
///        'userCondition': 'unknown',
///        'responseRequired': true,
///        'priority': 'immediate'
///      }
///    );
///    
///    // 2. ุญูุธ ูู Hive (ููุง Adapter ูุดุชุบู!)
///    await alertBox.put(sosAlert.id, sosAlert);
///    
///    // 3. ุฅุฑุณุงู ูุฌูุงุช ุงูุงุชุตุงู
///    for (final contact in emergencyContacts) {
///      await sendSOSCall(contact, sosAlert);
///      await sendSOSSMS(contact, sosAlert);
///      await sendSOSPush(contact, sosAlert);
///    }
///    
///    // 4. ุชุญุฏูุซ ุงูุญุงูุฉ
///    final sentAlert = sosAlert.copyWith(status: AlertStatus.sent);
///    await alertBox.put(sosAlert.id, sentAlert);
///    ```
/// 
/// ๐ฏ ุงูุฎูุงุตุฉ:
/// Alert ูู "ุญุงุฑุณ ุงูุฃูุงู" ูู ุงูุชุทุจูู. ูู ูุง ูุญุตู ุดูุก ูููุ
/// Alert ูุชุฃูุฏ ุฅู ุงููุณุชุฎุฏู ุนุงุฑู ูููุฏุฑ ูุชุตุฑู ุจุณุฑุนุฉ.
/// 
/// ุงูู Adapter ุฏูุฑู: ูุญูุธ ูู ูุฐู ุงูุชูุจููุงุช ุจุณุฑุนุฉ ูููุงุกุฉ
/// ุนุดุงู ููุฏุฑ ูุฑุฌุน ููุง ูุงุญูุงู ููุชุญููู ุฃู ููุณุฌูุงุช ุงููุงููููุฉ.
/// โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
