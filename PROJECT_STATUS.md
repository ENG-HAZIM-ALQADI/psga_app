# PSGA - Personal Security Guard App
## ุญุงูุฉ ุงููุดุฑูุน

---

## ูุนูููุงุช ุนุงูุฉ

| ุงูุนูุตุฑ | ุงููููุฉ |
|--------|--------|
| ุงุณู ุงููุดุฑูุน | ุญุงุฑุณู ุงูุดุฎุตู (PSGA) |
| ุงูุฅุตุฏุงุฑ | 1.0.0 |
| ุชุงุฑูุฎ ุงูุจุฏุก | ุฏูุณูุจุฑ 2025 |
| ุงููุฑุญูุฉ ุงูุญุงููุฉ | ุงููุฑุญูุฉ ุงูุณุงุฏุณุฉ - ุงูุฎุฑุงุฆุท ูุงูุชุชุจุน |
| ุญุงูุฉ ุงููุฑุญูุฉ | โ ููุชููุฉ |

---

## ููุฎุต ุงูุญุงูุฉ ุงููุนููุฉ

### โ ุงููุฑุญูุฉ ุงูุฃููู (ุงูุจููุฉ ุงูุชุญุชูุฉ) - ููุชููุฉ
- ูููู ุงููุดุฑูุน ูุชูุธูู ุงููููุงุช (Clean Architecture)
- ูููุงุช ุงูุฅุนุฏุงุฏุงุช ูุงูุซูุงุจุช
- ุงูุซููุงุช (ูุงุชุญ/ุฏุงูู)
- ูููุงุช ุงูุชุฑุฌูุฉ (arb) - 106+ ูุต
- ูุธุงู ุงูุชููู (GoRouter)
- ุดุงุดุฉ ุงูุจุฏุงูุฉ (Splash)
- Widgets ูุดุชุฑูุฉ
- ูุธุงู ุงูุชุณุฌูู (AppLogger)

### โ ุงููุฑุญูุฉ ุงูุซุงููุฉ (ูุธุงู ุงููุตุงุฏูุฉ) - ููุชููุฉ
- ุญุฒู Firebase ูููุนููุฉ ูููููุฃุฉ
- FirebaseAuthRemoteDataSource - ููุฅูุชุงุฌ
- MockAuthRemoteDataSource - ููุชุทููุฑ
- ุฑุณุงุฆู ุงูุฎุทุฃ ุจุงูุนุฑุจูุฉ
- ุดุงุดุงุช ุงููุตุงุฏูุฉ ููุชููุฉ

### โ ุงููุฑุญูุฉ ุงูุซุงูุซุฉ (ุฅุฏุงุฑุฉ ุงููุณุงุฑุงุช ูุงูุฑุญูุงุช) - ููุชููุฉ

#### Entities (ุงูููุงูุงุช)
| ุงูููุงู | ุงูุญุงูุฉ | ุงููุตู |
|--------|--------|-------|
| LocationEntity | โ | ูููุน ุฌุบุฑุงูู ูุน distanceTo(), toLatLng() |
| WaypointEntity | โ | ููุทุฉ ุนูู ุงููุณุงุฑ ูุน WaypointType enum |
| RouteEntity | โ | ูุณุงุฑ ูุญููุธ ูุน allWaypoints, copyWith() |
| TripEntity | โ | ุฑุญูุฉ ูุน TripStatus enum, duration, isActive |
| DeviationEntity | โ | ุงูุญุฑุงู ูุน DeviationSeverity enum |

#### Repositories
| Repository | ุงูุญุงูุฉ | ุงููุตู |
|------------|--------|-------|
| RouteRepository | โ | CRUD ูููุณุงุฑุงุช + ุงูููุถูุฉ |
| TripRepository | โ | ุจุฏุก/ุฅููุงุก ุฑุญูุฉ + Stream ููุชุญุฏูุซุงุช |

#### Use Cases
| Use Case | ุงูุญุงูุฉ | ุงููุตู |
|----------|--------|-------|
| CreateRouteUseCase | โ | ุฅูุดุงุก ูุณุงุฑ ุฌุฏูุฏ |
| GetUserRoutesUseCase | โ | ุฌูุจ ูุณุงุฑุงุช ุงููุณุชุฎุฏู |
| UpdateRouteUseCase | โ | ุชุญุฏูุซ ูุณุงุฑ |
| DeleteRouteUseCase | โ | ุญุฐู ูุณุงุฑ |
| StartTripUseCase | โ | ุจุฏุก ุฑุญูุฉ |
| EndTripUseCase | โ | ุฅููุงุก ุฑุญูุฉ |
| UpdateTripLocationUseCase | โ | ุชุญุฏูุซ ุงููููุน + ูุดู ุงูุงูุญุฑุงู |
| GetTripHistoryUseCase | โ | ุฌูุจ ุณุฌู ุงูุฑุญูุงุช |

#### Data Layer
| ุงููููู | ุงูุญุงูุฉ |
|--------|--------|
| LocationModel | โ fromJson/toJson/fromPosition |
| WaypointModel | โ fromJson/toJson |
| RouteModel | โ fromJson/toJson/fromFirestore/toFirestore |
| TripModel | โ fromJson/toJson/fromFirestore/toFirestore |
| DeviationModel | โ fromJson/toJson |
| RouteLocalDataSource | โ Mock implementation |
| RouteRemoteDataSource | โ Mock + Firebase |
| TripLocalDataSource | โ Mock implementation |
| TripRemoteDataSource | โ Mock + Firebase |
| RouteRepositoryImpl | โ + Offline-First |
| TripRepositoryImpl | โ + Offline-First |

#### Presentation Layer (BLoC)
| BLoC | ุงูุญุงูุฉ | ุงูุฃุญุฏุงุซ |
|------|--------|---------|
| RouteBloc | โ | LoadRoutes, CreateRoute, UpdateRoute, DeleteRoute, ToggleFavorite, SearchRoutes |
| TripBloc | โ | StartTrip, EndTrip, PauseTrip, ResumeTrip, CancelTrip, UpdateLocation, LoadTripHistory |

#### ุงูุดุงุดุงุช
| ุงูุดุงุดุฉ | ุงููุณุงุฑ | ุงูุญุงูุฉ |
|--------|--------|--------|
| ูุงุฆูุฉ ุงููุณุงุฑุงุช | /routes | โ |
| ุฅูุดุงุก ูุณุงุฑ | /routes/create | โ |
| ุชูุงุตูู ุงููุณุงุฑ | /routes/:id | โ |
| ุงูุฑุญูุฉ ุงููุดุทุฉ | /trip | โ |
| ุณุฌู ุงูุฑุญูุงุช | /trip/history | โ |
| ุชูุงุตูู ุฑุญูุฉ | /trip/:id | โ |

#### Widgets
| Widget | ุงูุญุงูุฉ | ุงููุตู |
|--------|--------|-------|
| RouteCard | โ | ุจุทุงูุฉ ุนุฑุถ ูุณุงุฑ |
| TripStatusWidget | โ | ุญุงูุฉ ุงูุฑุญูุฉ ุจุงูุฃููุงู |
| TripStatsBar | โ | ุฅุญุตุงุฆูุงุช ุงูุฑุญูุฉ |
| DeviationAlertWidget | โ | ุชูุจูู ุงูุงูุญุฑุงู ูุน ุนุฏุงุฏ |

---

### โ ุงููุฑุญูุฉ ุงูุฑุงุจุนุฉ (ูุธุงู ุงูุชูุจููุงุช) - ููุชููุฉ

#### Entities (ุงูููุงูุงุช)
| ุงูููุงู | ุงูุญุงูุฉ | ุงููุตู |
|--------|--------|-------|
| AlertEntity | โ | ุชูุจูู ูุน AlertType, AlertLevel, AlertStatus |
| AlertConfigEntity | โ | ุฅุนุฏุงุฏุงุช ุงูุชูุจููุงุช |
| ContactEntity | โ | ุฌูุฉ ุงุชุตุงู ูุน ContactRelationship |

#### Repositories
| Repository | ุงูุญุงูุฉ | ุงููุตู |
|------------|--------|-------|
| AlertRepository | โ | ุฅูุดุงุก/ุชุญุฏูุซ/ุฅูุบุงุก ุชูุจูู + ุฅุนุฏุงุฏุงุช |
| ContactRepository | โ | ุฅุถุงูุฉ/ุชุนุฏูู/ุญุฐู ุฌูุฉ ุงุชุตุงู |

#### Use Cases
| Use Case | ุงูุญุงูุฉ | ุงููุตู |
|----------|--------|-------|
| TriggerAlertUseCase | โ | ุฅุทูุงู ุชูุจูู |
| AcknowledgeAlertUseCase | โ | ุงูุฅูุฑุงุฑ ุจุงูุชูุจูู |
| CancelAlertUseCase | โ | ุฅูุบุงุก ุชูุจูู |
| EscalateAlertUseCase | โ | ุชุตุนูุฏ ุชูุจูู |
| SendSOSUseCase | โ | ุฅุฑุณุงู ุทูุงุฑุฆ SOS |
| GetAlertHistoryUseCase | โ | ุฌูุจ ุณุฌู ุงูุชูุจููุงุช |

#### Services (ุฏุนู ูุฒุฏูุฌ Mock/Firebase)
| Service | ุงูุญุงูุฉ | ุงููุตู |
|---------|--------|-------|
| NotificationService | โ | ุงูุฅุดุนุงุฑุงุช ุงููุญููุฉ |
| FCMService | โ | Firebase Cloud Messaging (Mock + Firebase) |
| SMSService | โ | ุฅุฑุณุงู SMS |

#### Data Sources (ุฏุนู ูุฒุฏูุฌ)
| DataSource | Mock | Firebase |
|------------|------|----------|
| AlertRemoteDataSource | โ MockAlertRemoteDataSource | โ FirebaseAlertRemoteDataSource |
| ContactRemoteDataSource | โ MockContactRemoteDataSource | โ FirebaseContactRemoteDataSource |
| AlertRepositoryImpl | โ + Offline-First | โ + Offline-First |
| ContactRepositoryImpl | โ + Offline-First | โ + Offline-First |

#### Presentation
| BLoC | ุงูุญุงูุฉ | ุงูุฃุญุฏุงุซ |
|------|--------|---------|
| AlertBloc | โ | TriggerAlert, Acknowledge, Cancel, Escalate, SendSOS, LoadHistory |
| ContactBloc | โ | Load, Add, Update, Delete, Verify, SetEmergency |

#### ุงูุดุงุดุงุช
| ุงูุดุงุดุฉ | ุงููุณุงุฑ | ุงูุญุงูุฉ |
|--------|--------|--------|
| ุตูุญุฉ ุงูุทูุงุฑุฆ | /emergency | โ |
| ุฅุนุฏุงุฏุงุช ุงูุชูุจููุงุช | /settings/alerts | โ |
| ุณุฌู ุงูุชูุจููุงุช | /alerts/history | โ |
| ุฌูุงุช ุงูุงุชุตุงู | /contacts | โ |
| ุฅุถุงูุฉ ุฌูุฉ ุงุชุตุงู | /contacts/add | โ |

#### Widgets
| Widget | ุงูุญุงูุฉ | ุงููุตู |
|--------|--------|-------|
| SOSButton | โ | ุฒุฑ ุทูุงุฑุฆ ูุน ุถุบุท ูุทูู 3 ุซูุงูู |
| CountdownTimerWidget | โ | ุนุฏุงุฏ ุชูุงุฒูู |
| AlertDialogWidget | โ | ุญูุงุฑ ุงูุชูุจูู |
| AlertLevelIndicator | โ | ูุคุดุฑ ูุณุชูู ุงูุชูุจูู |
| ContactCard | โ | ุจุทุงูุฉ ุฌูุฉ ุงูุงุชุตุงู |

---

### โ ุงููุฑุญูุฉ ุงูุฎุงูุณุฉ (ุงูุชุฎุฒูู ุงููุฌูู Offline-First) - ููุชููุฉ

#### ุฎุฏูุงุช ุงูุชุฎุฒูู ุงููุญูู
| ุงูุฎุฏูุฉ | ุงูุญุงูุฉ | ุงููุตู |
|--------|--------|-------|
| HiveService | โ | ุชููุฆุฉ ูุฅุฏุงุฑุฉ Hive (Singleton) |
| HiveBoxes | โ | ุชุนุฑูู ุฃุณูุงุก ุงูู Boxes (8 boxes) |
| LocalStorageService | โ | ุฎุฏูุฉ ุงูุชุฎุฒูู ุงููุญูู (Singleton) |
| BoxManager | โ | ุฅุฏุงุฑุฉ ูุชุญ/ุฅุบูุงู ุงูู Boxes |

#### ุฎุฏูุงุช ุงููุฒุงููุฉ
| ุงูุฎุฏูุฉ | ุงูุญุงูุฉ | ุงููุตู |
|--------|--------|-------|
| SyncService | โ | ุฅุฏุงุฑุฉ ูุงุฆูุฉ ุงููุฒุงููุฉ (Singleton) |
| SyncManager | โ | ุงููุฒุงููุฉ ุงูุชููุงุฆูุฉ ูุงูููุฑูุฉ (Singleton) |
| ConflictResolver | โ | ุญู ุงูุชุนุงุฑุถุงุช - ุงูุฃุญุฏุซ ูููุฒ (Singleton) |
| SyncItem | โ | ุนูุตุฑ ูู ูุงุฆูุฉ ุงููุฒุงููุฉ + Adapter |

#### ุฎุฏูุฉ ุงูุงุชุตุงู
| ุงูุฎุฏูุฉ | ุงูุญุงูุฉ | ุงููุตู |
|--------|--------|-------|
| ConnectivityService | โ | ูุฑุงูุจุฉ ุญุงูุฉ ุงูุงุชุตุงู (Singleton) |

#### Hive Type Adapters
| Adapter | TypeId | Model | Box Name | ุงูุญุงูุฉ |
|---------|--------|-------|----------|--------|
| UserModelAdapter | 0 | UserModel | users | โ |
| RouteModelAdapter | 1 | RouteModel | routes | โ |
| TripModelAdapter | 2 | TripModel | trips | โ |
| WaypointModelAdapter | 3 | WaypointModel | waypoints | โ |
| LocationModelAdapter | 4 | LocationModel | locations | โ |
| AlertModelAdapter | 5 | AlertModel | alerts | โ |
| ContactModelAdapter | 6 | ContactModel | contacts | โ |
| SyncItemAdapter | 7 | SyncItem | sync_queue | โ |
| AlertConfigModelAdapter | 8 | AlertConfigModel | alert_configs | โ |
| DeviationModelAdapter | 9 | DeviationModel | deviations | โ |

#### Repository Implementations (ูุญุฏูุซุฉ)
| Repository | ุงูุญุงูุฉ | ุงูุนูููุงุช ุงูููุญุฏูุซุฉ |
|------------|--------|-------------------|
| AuthRepositoryImpl | โ | login, register โ ุญูุธ + ูุฒุงููุฉ |
| RouteRepositoryImpl | โ | create, update, delete โ ุญูุธ + ูุฒุงููุฉ |
| TripRepositoryImpl | โ | 7 ุนูููุงุช โ ุญูุธ + ูุฒุงููุฉ |
| AlertRepositoryImpl | โ | create, update โ ุญูุธ + ูุฒุงููุฉ |
| ContactRepositoryImpl | โ | create, update, delete โ ุญูุธ + ูุฒุงููุฉ |

#### Widgets
| Widget | ุงูุญุงูุฉ | ุงููุตู |
|--------|--------|-------|
| SyncStatusWidget | โ | ุนุฑุถ ุญุงูุฉ ุงููุฒุงููุฉ (5 ุญุงูุงุช) |
| OfflineBanner | โ | ุดุฑูุท ุงููุถุน ุฃูููุงูู + ุฃููููุดู |

---

## ูุธุงู ุงูุชุจุฏูู ุจูู Mock ู Firebase

### ุงูุชูููู
```dart
// lib/config/app_config.dart
static const bool enableFirebase = false;  // true = Firebase, false = Mock
static const bool useMockAuth = true;      // true = Mock Auth, false = Firebase Auth
```

### ุขููุฉ ุงูุนูู
1. **ูุถุน Mock (ุงูุชุทููุฑ):**
   - ุฌููุน ุงูุจูุงูุงุช ุชูุฎุฒู ูุญููุงู ูู Hive
   - ูุง ูุชุทูุจ ุงุชุตุงู Firebase
   - ูุซุงูู ููุชุทููุฑ ูุงูุงุฎุชุจุงุฑ ุงูุณุฑูุน

2. **ูุถุน Firebase (ุงูุฅูุชุงุฌ):**
   - ุงูุจูุงูุงุช ุชูุฎุฒู ูุญููุงู ุฃููุงู (Offline-First)
   - ุชููุฒุงูู ูุน Firestore ุนูุฏ ุงูุงุชุตุงู
   - ูุชุทูุจ ุชููุฆุฉ Firebase
   - ููุงุณุจ ูููุดุฑ ุงููุนูู

### ุงููููุงุช ุงูููุญุฏุซุฉ ููุฏุนู ุงููุฒุฏูุฌ + Offline-First
- `lib/core/di/injection_container.dart` - ุชุณุฌูู ุงูุชุจุนูุงุช + ุฎุฏูุงุช ุงููุฒุงููุฉ
- `lib/app.dart` - ุชุถููู ุฌููุน BLoCs (Auth, Route, Trip, Alert, Contact)
- `lib/features/*/data/repositories/*_repository_impl.dart` - ุฌููุน ุงููุณุชูุฏุนุงุช ูุญุฏูุซุฉ
- `lib/core/services/sync/*.dart` - ูุธุงู ุงููุฒุงููุฉ ุงููุงูู
- `lib/core/services/storage/*.dart` - ุฎุฏูุงุช ุงูุชุฎุฒูู ุงููุญูู
- `lib/core/services/connectivity/*.dart` - ูุฑุงูุจุฉ ุงูุงุชุตุงู

---

## ุงูุญุฒู

| ุงูุญุฒูุฉ | ุงูุฅุตุฏุงุฑ | ุงูุญุงูุฉ | ุงูุบุฑุถ |
|--------|---------|--------|-------|
| flutter_bloc | ^8.1.6 | โ | ุฅุฏุงุฑุฉ ุงูุญุงูุฉ |
| go_router | ^14.2.0 | โ | ุงูุชููู |
| google_fonts | ^6.2.1 | โ | ุงูุฎุทูุท |
| dartz | ^0.10.1 | โ | Functional Programming |
| get_it | ^7.7.0 | โ | ุญูู ุงูุชุจุนูุงุช |
| equatable | ^2.0.5 | โ | ููุงุฑูุฉ ุงูููุงูุงุช |
| firebase_core | ^3.3.0 | โ | ุฃุณุงุณ Firebase |
| firebase_auth | ^5.1.4 | โ | ุงููุตุงุฏูุฉ |
| firebase_messaging | ^15.0.4 | โ | ุฅุดุนุงุฑุงุช Push |
| flutter_local_notifications | ^17.2.2 | โ | ุฅุดุนุงุฑุงุช ูุญููุฉ |
| url_launcher | ^6.3.0 | โ | ูุชุญ ุฑูุงุจุท/ุงุชุตุงู |
| hive | ^2.2.3 | โ | ูุงุนุฏุฉ ุจูุงูุงุช ูุญููุฉ |
| hive_flutter | ^1.1.0 | โ | ุชูุงูู Hive |
| cloud_firestore | ^5.2.1 | โ | ูุงุนุฏุฉ ุจูุงูุงุช ุณุญุงุจูุฉ |
| connectivity_plus | ^6.0.5 | โ | ูุฑุงูุจุฉ ุงูุงุชุตุงู |

---

## ุฌูุฏุฉ ุงูููุฏ

```bash
$ flutter analyze
Analyzing psga_app...
No issues found! (ran in 11.0s)
```

| ุงููุนูุงุฑ | ุงูุญุงูุฉ |
|---------|--------|
| flutter analyze = 0 ุฃุฎุทุงุก | โ |
| flutter analyze = 0 ุชุญุฐูุฑุงุช | โ |
| flutter analyze = 0 ููุงุญุธุงุช | โ |
| Clean Architecture | โ ูุทุจู |
| AppLogger | โ ุฑุณุงุฆู ุนุฑุจูุฉ |
| CustomButton/CustomTextField | โ ููุณุชุฎุฏูุฉ (ููุน ุงูุชูุฑุงุฑ) |
| ุฏุนู ูุฒุฏูุฌ Mock/Firebase | โ ููููุฐ |
| Offline-First Architecture | โ ููููุฐ ูุงูู |
| Singleton Pattern | โ ููุฎุฏูุงุช ุงูุฃุณุงุณูุฉ |
| Type Safety | โ ูุงูู |
| Error Handling | โ ุดุงูู |

---

## ุขููุฉ Offline-First

### Flow Diagram
```
ุนูููุฉ ุงููุณุชุฎุฏู
    โ
[Business Logic / Use Cases]
    โ
Repository
    โโโ Hive (ุญูุธ ูุญูู ููุฑุงู) โ
    โโโ SyncQueue (ุฅุถุงูุฉ ูููุฒุงููุฉ) โ
    โโโ ุนูุฏุฉ ููู UI ูุจุงุดุฑุฉ
    โ
[Background Process]
SyncManager ูุฑุงูุจ:
    โข ุชุบูุฑุงุช ุงูุงุชุตุงู
    โข ุนูุงุตุฑ ูู SyncQueue
    โข ุญุงูุฉ ูุฒุงููุฉ Firebase
    โ
ุนูุฏ ุชููุฑ ุงูุงุชุตุงู:
    โข ูุฒุงููุฉ ุฏูุนูุฉ (Batch) ููุนูุงุตุฑ
    โข ุญู ุงูุชุนุงุฑุถุงุช (ุงูุฃุญุฏุซ ูููุฒ)
    โข ุญุฐู ูู ุงููุงุฆูุฉ ุนูุฏ ุงููุฌุงุญ
    โข ุฅุนุงุฏุฉ ูุญุงููุฉ ุนูุฏ ุงููุดู
```

### ุญุงูุงุช ุงููุฒุงููุฉ
- ๐ข **AllSynced** - ูู ุงูุจูุงูุงุช ูุชุฒุงููุฉ
- ๐ก **Syncing** - ุฌุงุฑู ุงููุฒุงููุฉ
- ๐ด **Offline** - ุจุฏูู ุงุชุตุงู
- ๐ **ConflictResolved** - ุชู ุญู ุชุนุงุฑุถ
- โช **Pending** - ุนูุงุตุฑ ูู ุงูุงูุชุธุงุฑ

---

## ุงูููุฒุงุช ุงูููููุฐุฉ

### ุงููุฑุญูุฉ ุงูุฎุงูุณุฉ (ุงูุฌุฏูุฏุฉ)
- โ ุชุฎุฒูู ูุญูู ุจู Hive ูุน 10 Type Adapters
- โ ูุธุงู ูุฒุงููุฉ ุชููุงุฆู ูุน Firebase Firestore
- โ ูุงุฆูุฉ ุงูุชุธุงุฑ ูููุฒุงููุฉ (SyncQueue)
- โ ุญู ุงูุชุนุงุฑุถุงุช ุงูุชููุงุฆู (ุงูุฃุญุฏุซ ูููุฒ)
- โ ูุฑุงูุจุฉ ุงูุงุชุตุงู ุจุงูุฅูุชุฑูุช
- โ ูุคุดุฑุงุช ุญุงูุฉ ุงููุฒุงููุฉ ูู UI
- โ ุดุฑูุท ุชูุจูู ุงููุถุน ุฃูููุงูู ูุน ุฃููููุดู
- โ ุฏุนู ูุงูู ูููุถุน Offline-First
- โ ุฅุนุงุฏุฉ ูุญุงููุฉ ุชููุงุฆูุฉ ุนูุฏ ูุดู ุงููุฒุงููุฉ
- โ ูุฒุงููุฉ ุฏูุนูุฉ (Batch) ููุฃุฏุงุก ุงูุฃูุถู
- โ ุชุญุฏูุซ ุฌููุน ุงููุณุชูุฏุนุงุช (5 repositories)

### ุงููุฑุญูุฉ ุงูุฑุงุจุนุฉ
- โ ุฒุฑ ุทูุงุฑุฆ SOS ูุน ุถุบุท ูุทูู 3 ุซูุงูู
- โ ุนุฏุงุฏ ุชูุงุฒูู ูุจู ุงูุชุตุนูุฏ
- โ ุฅูุบุงุก ุงูุชูุจูู (ุฃูุง ุจุฎูุฑ)
- โ ุฃุฑูุงู ุงูุทูุงุฑุฆ ุงูุณุฑูุนุฉ
- โ ุณุฌู ุงูุชูุจููุงุช ูุน ููุชุฑ
- โ ุฅุนุฏุงุฏุงุช ุงูุชูุจููุงุช
- โ ุฌูุงุช ุงูุงุชุตุงู ุงูููุซููุฉ
- โ ุฏุนู ูุฒุฏูุฌ Mock/Firebase

### ุงููุฑุญูุฉ ุงูุซุงูุซุฉ
- โ ุนุฑุถ ูุงุฆูุฉ ุงููุณุงุฑุงุช
- โ ุฅูุดุงุก ูุณุงุฑ ุฌุฏูุฏ
- โ ุชุนุฏูู ูุณุงุฑ ููุฌูุฏ
- โ ุญุฐู ูุณุงุฑ (ุณุญุจ ููุญุฐู)
- โ ุจุฏุก ุฑุญูุฉ
- โ ุฅููุงู ูุคูุช / ุงุณุชุฆูุงู
- โ ุฅููุงุก ุฑุญูุฉ
- โ ุนุฑุถ ุณุฌู ุงูุฑุญูุงุช
- โ ููุชุฑ ุญุณุจ ุงูุชุงุฑูุฎ
- โ ูุดู ุงูุงูุญุฑุงู ุนู ุงููุณุงุฑ (100 ูุชุฑ)
- โ ุฒุฑ ุทูุงุฑุฆ SOS

---

## ูููุงุช ุงูุชูุซูู

| ุงูููู | ุงูุญุงูุฉ | ุขุฎุฑ ุชุญุฏูุซ |
|-------|--------|-----------|
| PROJECT_STATUS.md | โ ูุญุฏุซ | ุฏูุณูุจุฑ 2025 |
| PHASE_HANDOVER.md | โ ูุญุฏุซ | ุฏูุณูุจุฑ 2025 |
| Steps_Firebase.md | โ ููุฌูุฏ | ุฏูุณูุจุฑ 2025 |

---

## ุงูุฃุฏุงุก ูุงูุฅุญุตุงุฆูุงุช

| ุงููููุงุณ | ุงููููุฉ | ุงูููุงุญุธุงุช |
|---------|--------|-----------|
| ููุช ุงุณุชุนูุงู Hive | < 100ms | ุณุฑูุน ุฌุฏุงู |
| ุญุฌู ุงููุฒุงููุฉ ุงูุฏูุนูุฉ | 10-50 ุนูุตุฑ | ูุงุจู ููุชุนุฏูู |
| ุงุณุชุฎุฏุงู ุงูุฐุงูุฑุฉ | ูุญุณูู | Hive efficient |
| ููุช ุจุฏุก ุงูุชุทุจูู | 3-5 ุฏูุงุฆู | ุฃูู ูุฑุฉ ููุท |
| ุฏุนู Offline | 100% | ูุงูู |
| ุชูููู ุงุณุชุฏุนุงุกุงุช Firebase | ~90% | Batch sync |

---

## ุงูุฃูุงู ูุงูุฎุตูุตูุฉ

| ุงูููุฒุฉ | ุงูุญุงูุฉ | ุงูููุงุญุธุงุช |
|--------|--------|-----------|
| ุงูุชุฎุฒูู ุงููุญูู | โ | Hive - ูุญูู ููุท |
| ุงููุฒุงููุฉ ุงูุณุญุงุจูุฉ | โ | HTTPS ููุท |
| Firestore Security Rules | โ | ูุทุจูุฉ |
| ุชุฎุฒูู ูููุงุช ุงููุฑูุฑ | โ | ูุง ุชูุฎุฒู ูุญููุงู |
| ุงูุชุดููุฑ ุงููุญูู | โ๏ธ | ุงููุฑุญูุฉ 7 |
| Biometric Auth | โ๏ธ | ุงููุฑุญูุฉ 7 |

---

### โ ุงููุฑุญูุฉ ุงูุณุงุฏุณุฉ (ุงูุฎุฑุงุฆุท ูุงูุชุชุจุน) - ููุชููุฉ

#### ุฎุฏูุงุช ุงููููุน ูุงูุชุชุจุน
| ุงูุฎุฏูุฉ | ุงูุญุงูุฉ | ุงููุตู |
|--------|--------|-------|
| LocationService | โ | ุชุชุจุน ุงููููุน (Singleton) |
| BackgroundLocationService | โ | ุชุชุจุน ูู ุงูุฎูููุฉ (Singleton) |
| GeocodingService | โ | ุชุญููู ุงูุฅุญุฏุงุซูุงุช (Singleton) |
| DirectionsService | โ | ุญุณุงุจ ุงููุณุงุฑุงุช (Singleton) |
| DeviationDetector | โ | ูุดู ุงูุงูุญุฑุงู (Singleton) |

#### Entities
| ุงูููุงู | ุงูุญุงูุฉ | ุงููุตู |
|--------|--------|-------|
| PlaceEntity | โ | ููุงู ูุน ุงููููุน ูุงูุชูุงุตูู |
| DirectionEntity | โ | ุงุชุฌุงู ูุน ุงูุฎุทูุงุช |

#### BLoCs
| BLoC | ุงูุญุงูุฉ | ุงูุฃุญุฏุงุซ |
|------|--------|---------|
| MapBloc | โ | 14 ุญุฏุซ (Init, Track, Search, Deviation, etc.) |
| LocationBloc | โ | 5 ุฃุญุฏุงุซ (Permission, Current, Tracking) |

#### ุงูุดุงุดุงุช
| ุงูุดุงุดุฉ | ุงููุณุงุฑ | ุงูุญุงูุฉ |
|--------|--------|--------|
| ุงูุฎุฑูุทุฉ ุงูุฑุฆูุณูุฉ | /map | โ |
| ุงุฎุชูุงุฑ ุงููููุน | /location/select | โ |
| ุงูุจุญุซ ุนู ุฃูุงูู | /places/search | โ |

#### Widgets
| Widget | ุงูุญุงูุฉ | ุงููุตู |
|--------|--------|-------|
| MapWidget | โ | ุฎุฑูุทุฉ ูุงุจูุฉ ูุฅุนุงุฏุฉ ุงูุงุณุชุฎุฏุงู |
| LocationMarker | โ | ุนูุงูุงุช ุงููููุน ุงููุฎุชููุฉ |
| RouteOverlay | โ | ุฑุณู ุงููุณุงุฑุงุช |
| DistanceIndicator | โ | ุนุฑุถ ุงููุณุงูุฉ ูุงูููุช |
| DeviationWarning | โ | ุชุญุฐูุฑ ุงูุงูุญุฑุงู |

#### ุงูุญุฒู ุงููุถุงูุฉ
| ุงูุญุฒูุฉ | ุงูุฅุตุฏุงุฑ | ุงูุญุงูุฉ |
|--------|---------|--------|
| google_maps_flutter | ^2.9.0 | โ |
| geolocator | ^12.0.0 | โ |
| flutter_polyline_points | ^2.1.0 | โ |
| geocoding | ^3.0.0 | โ |
| permission_handler | ^11.3.1 | โ |
| flutter_map | ^7.0.2 | โ |
| cached_network_image | ^3.4.1 | โ |

---

## ุงููุฑุงุญู ุงููุงุฏูุฉ

### ุงููุฑุญูุฉ ุงูุณุงุจุนุฉ (ุงูุชุญุณููุงุช ูุงูุฃูุงู)
**ุงูุญุงูุฉ:** ๐ ููุฏ ุงูุชุฎุทูุท

#### ุงููุชุทูุจุงุช
1. โ ุชุดููุฑ ุงูุจูุงูุงุช ุงููุญููุฉ
2. โ Biometric authentication
3. โ ุชุญุณููุงุช ุงูุฃุฏุงุก
4. โ ุงุฎุชุจุงุฑุงุช ุดุงููุฉ (Unit + Widget + Integration)
5. โ ุชูุซูู API ูุงูู
6. โ ุฅุนุฏุงุฏ CI/CD

---

## ุงูุงุณุชุฎุฏุงู ูููุทูุฑ

### ุจุฏุก ุงูุชุทุจูู
```bash
# ุชุดุบูู ูู ูุถุน ุงูุชุทููุฑ (Mock)
flutter run -d web-server --web-port=5000 --web-hostname=0.0.0.0

# ุชุดุบูู ูู ูุถุน Firebase
# ุบููุฑ enableFirebase = true ูู app_config.dart ุซู:
flutter run
```

### ูุญุต ุงูููุฏ
```bash
# ุชุญููู ุงูููุฏ
flutter analyze

# ุงูุชุฃูุฏ ูู ุนุฏู ูุฌูุฏ ูุดุงูู
flutter doctor

# ุชูุธูู ุงููุดุฑูุน
flutter clean && flutter pub get
```

### ุงูุงุฎุชุจุงุฑุงุช
```bash
# ุฌููุน ุงูุงุฎุชุจุงุฑุงุช
flutter test

# ุงุฎุชุจุงุฑ ูุนูู
flutter test test/features/auth/auth_bloc_test.dart

# ุชุบุทูุฉ ุงูุงุฎุชุจุงุฑุงุช
flutter test --coverage
```

### ุงูุจูุงุก ููุฅูุชุงุฌ
```bash
# Android
flutter build apk --release
flutter build appbundle --release

# iOS
flutter build ios --release

# Web
flutter build web --release
```

---

## ูุตุงุฆุญ ูููุทูุฑ ุงูุชุงูู

### ุงูุนูู ูุน Offline-First
1. **ูู ุนูููุฉ ุชูุญูุธ ูุญููุงู ุฃููุงู** - ูุง ุชูุชุธุฑ Firebase
2. **SyncManager ุชููุงุฆู** - ูุง ุชููู ุจุดุฃู ุงููุฒุงููุฉ ุงููุฏููุฉ
3. **ุงูุชุนุงุฑุถุงุช ุชูุญู ุชููุงุฆูุงู** - ุงูุฃุญุฏุซ ูููุฒ
4. **ุงุณุชุฎุฏู SyncStatusWidget** - ูุฅุธูุงุฑ ุญุงูุฉ ุงููุฒุงููุฉ ูููุณุชุฎุฏู

### ุฅุถุงูุฉ ููุฒุฉ ุฌุฏูุฏุฉ
```dart
// 1. ุฃูุดุฆ Entity ูู domain/entities
// 2. ุฃูุดุฆ Model ูุน HiveTypeAdapter
// 3. ุญุฏูุซ Repository:
await localDataSource.save(model);
final syncItem = SyncItem(...);
await _syncManager.addToQueue(syncItem);
return Right(entity);

// 4. SyncManager ุณูุชููู ุงูุจุงูู ุชููุงุฆูุงู!
```

### Debug ุงูุฃุฎุทุงุก
1. **ุงูุญุต AppLogger** - ุฑุณุงุฆู ุนุฑุจูุฉ ูุงุถุญุฉ
2. **ุงูุญุต SyncQueue** - `getPendingItems()`
3. **ุงูุญุต Connectivity** - `isConnected`
4. **ุงูุญุต Hive Boxes** - `BoxManager.count()`

---

## ุงููุดุงูู ุงูุดุงุฆุนุฉ ูุญููููุง

| ุงููุดููุฉ | ุงูุญู |
|---------|------|
| ุงูุชุทุจูู ุจุทูุก ุนูุฏ ุงูุจุฏุก | ุทุจูุนู - ุฃูู ูุฑุฉ ููุท (3-5 ุฏูุงุฆู) |
| ุงููุฒุงููุฉ ูุง ุชุนูู | ุงูุญุต ุงูุงุชุตุงู + Firestore Rules |
| ุงูุจูุงูุงุช ูุง ุชูุญูุธ | ุงูุญุต Hive initialization |
| Type casting error | ุชุฃูุฏ ูู ุชุณุฌูู ุฌููุน Adapters |
| Conflict ูุง ููุญู | ุชุฃูุฏ ูู ูุฌูุฏ timestamps ุตุญูุญุฉ |

---

## ูููุณุงุนุฏุฉ ูุงูุฏุนู

### ุงูููุงุฑุฏ ุงููุชุงุญุฉ
- ๐ **PHASE_HANDOVER.md** - ุชูุงุตูู ุงูุชุณููู ุงููุงููุฉ
- ๐ **Steps_Firebase.md** - ุฅุนุฏุงุฏ Firebase ุฎุทูุฉ ุจุฎุทูุฉ
- ๐ฌ **AppLogger** - ุฑุณุงุฆู ุนุฑุจูุฉ ูู ุงููููุณูู
- ๐ **flutter analyze** - ูุญุต ุงูููุฏ

### ุนูุฏ ุญุฏูุซ ูุดููุฉ
1. ุงูุฑุฃ ุฑุณุงุฆู ุงูุฎุทุฃ ูู ุงููููุณูู
2. ุงูุญุต AppLogger ููุฑุณุงุฆู ุงูุชูุตูููุฉ
3. ุฑุงุฌุน ุงูุชูุซูู ูู PHASE_HANDOVER.md
4. ุงูุญุต Firebase Console ูููุฒุงููุฉ
5. ุงุณุชุฎุฏู flutter analyze ูููุดุงูู ุงูุจุฑูุฌูุฉ

---

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
**ุงูุญุงูุฉ ุงูุฅุฌูุงููุฉ:** โ 6 ูู 7 ูุฑุงุญู ููุชููุฉ (86%)
**ุฌูุฏุฉ ุงูููุฏ:** 0 ุฃุฎุทุงุก | 0 ุชุญุฐูุฑุงุช | 0 ููุงุญุธุงุช
**ุงูุฌุงูุฒูุฉ:** โ ุฌุงูุฒ ูููุฑุญูุฉ ุงูุณุงุจุนุฉ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

**ุขุฎุฑ ุชุญุฏูุซ:** ุฏูุณูุจุฑ 2025